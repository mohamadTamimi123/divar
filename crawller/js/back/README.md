# ๐ Divar Property Crawler

ฺฉุฑุงููุฑ ููุดููุฏ ุจุฑุง ุงุณุชุฎุฑุงุฌ ุขฺฏูโูุง ุงููุงฺฉ ุงุฒ ุฏูุงุฑ ุจุฑุง ุดูุฑูุง ุชูุฑุงู ู ฺฉุฑุฌ

## ๐ฏ ูฺฺฏโูุง

- โ ฺฉุฑุงูู ุขฺฏูโูุง ูุฑูุด ู ุงุฌุงุฑู
- โ ูพุดุชุจุงู ุงุฒ ุดูุฑูุง ุชูุฑุงู ู ฺฉุฑุฌ
- โ ุงุณุชุฎุฑุงุฌ ุฌุฒุฆุงุช ฺฉุงูู ุขฺฏูโูุง
- โ ุฐุฎุฑู ุชุตุงูุฑ ู ุงุทูุงุนุงุช ูฺฉุงู
- โ ูุฏุฑุช ุฎุทุง ู retry
- โ ฺฏุฒุงุฑุดโฺฏุฑ ฺฉุงูู
- โ ุชูุธูุงุช ูุงุจู ุชุบุฑ

## ๐ ูพุดโูุงุฒูุง

### ูุฑูโุงูุฒุงุฑูุง ููุฑุฏ ูุงุฒ:
- Node.js (ูุณุฎู 14 ุง ุจุงูุงุชุฑ)
- Google Chrome
- npm ุง yarn

### ูุตุจ ูุงุจุณุชฺฏโูุง:
```bash
npm install
```

## ๐ ุฑุงูโุงูุฏุงุฒ

### 1. ุชูุธูุงุช ุงููู
ูุงู `config.js` ุฑุง ุจุฑุฑุณ ู ุชูุธู ฺฉูุฏ:

```javascript
module.exports = {
    maxAdsPerType: 50,           // ุชุนุฏุงุฏ ุขฺฏูโูุง
    delayBetweenAds: 2000,       // ุชุงุฎุฑ ุจู ุขฺฏูโูุง
    headless: false,             // ุญุงูุช headless
    executablePath: '/usr/bin/google-chrome' // ูุณุฑ Chrome
};
```

### 2. ุงุฌุฑุง ฺฉุฑุงููุฑ
```bash
node divar_crawler.js
```

## ๐ ุฎุฑูุฌ

ฺฉุฑุงููุฑ ูุงูโูุง ุฒุฑ ุฑุง ุชููุฏ ูโฺฉูุฏ:

### ูุงูโูุง ุฌุฏุงฺฏุงูู:
- `tehran_sale_[timestamp].json` - ุขฺฏูโูุง ูุฑูุด ุชูุฑุงู
- `tehran_rent_[timestamp].json` - ุขฺฏูโูุง ุงุฌุงุฑู ุชูุฑุงู
- `karaj_sale_[timestamp].json` - ุขฺฏูโูุง ูุฑูุด ฺฉุฑุฌ
- `karaj_rent_[timestamp].json` - ุขฺฏูโูุง ุงุฌุงุฑู ฺฉุฑุฌ

### ูุงูโูุง ุชุฑฺฉุจ:
- `divar_combined_[timestamp].json` - ุชูุงู ูุชุงุฌ
- `summary_[timestamp].json` - ุฎูุงุตู ุขูุงุฑ

## ๐ ุณุงุฎุชุงุฑ ุฏุงุฏู

### ุขฺฏู ูุฑูุด:
```json
{
    "title": "ุนููุงู ุขฺฏู",
    "metraj": "ูุชุฑุงฺ",
    "salSakht": "ุณุงู ุณุงุฎุช",
    "otagh": "ุชุนุฏุงุฏ ุงุชุงู",
    "gheymatKol": "ููุช ฺฉู",
    "gheymatHarMetr": "ููุช ูุฑ ูุชุฑ",
    "tabaghe": "ุทุจูู",
    "parking": "ูพุงุฑฺฉูฺฏ",
    "asansor": "ุขุณุงูุณูุฑ",
    "anbari": "ุงูุจุงุฑ",
    "tozihat": "ุชูุถุญุงุช",
    "location": "ูููุนุช",
    "imageLinks": ["ููฺฉ ุชุตุงูุฑ"],
    "city": "ุดูุฑ",
    "adType": "ููุน ุขฺฏู",
    "url": "ููฺฉ ุขฺฏู",
    "scrapedAt": "ุชุงุฑุฎ ุงุณุชุฎุฑุงุฌ"
}
```

### ุขฺฏู ุงุฌุงุฑู:
```json
{
    "title": "ุนููุงู ุขฺฏู",
    "metraj": "ูุชุฑุงฺ",
    "salSakht": "ุณุงู ุณุงุฎุช",
    "otagh": "ุชุนุฏุงุฏ ุงุชุงู",
    "vadie": "ูุฏุนู",
    "ejare": "ุงุฌุงุฑู ูุงูุงูู",
    "tabaghe": "ุทุจูู",
    "parking": "ูพุงุฑฺฉูฺฏ",
    "asansor": "ุขุณุงูุณูุฑ",
    "anbari": "ุงูุจุงุฑ",
    "tozihat": "ุชูุถุญุงุช",
    "location": "ูููุนุช",
    "imageLinks": ["ููฺฉ ุชุตุงูุฑ"],
    "city": "ุดูุฑ",
    "adType": "ููุน ุขฺฏู",
    "url": "ููฺฉ ุขฺฏู",
    "scrapedAt": "ุชุงุฑุฎ ุงุณุชุฎุฑุงุฌ"
}
```

## โ๏ธ ุชูุธูุงุช

### ุชูุธูุงุช ุงุตู:
- `maxAdsPerType`: ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุขฺฏู ุจุฑุง ูุฑ ููุน (ูพุดโูุฑุถ: 50)
- `delayBetweenAds`: ุชุงุฎุฑ ุจู ูพุฑุฏุงุฒุด ุขฺฏูโูุง (ูพุดโูุฑุถ: 2000ms)
- `headless`: ุงุฌุฑุง ุฏุฑ ุญุงูุช headless (ูพุดโูุฑุถ: false)
- `executablePath`: ูุณุฑ ุงุฌุฑุง Chrome

### ุชูุธูุงุช ุฒูุงู:
- `pageLoadTimeout`: ุชุงูโุงูุช ุจุงุฑฺฏุฐุงุฑ ุตูุญู (ูพุดโูุฑุถ: 30000ms)
- `elementWaitTimeout`: ุชุงูโุงูุช ุงูุชุธุงุฑ ุจุฑุง ุนูุงุตุฑ (ูพุดโูุฑุถ: 15000ms)
- `adProcessTimeout`: ุชุงูโุงูุช ูพุฑุฏุงุฒุด ุขฺฏู (ูพุดโูุฑุถ: 20000ms)

## ๐ง ุนุจโุงุจ

### ูุดฺฉูุงุช ุฑุงุฌ:

1. **ุฎุทุง Chrome executable:**
   ```bash
   # ูุณุฑ Chrome ุฑุง ุฏุฑ config.js ุชูุธู ฺฉูุฏ
   executablePath: '/usr/bin/google-chrome'
   ```

2. **ุฎุทุง timeout:**
   - ุชุงูโุงูุชโูุง ุฑุง ุฏุฑ config.js ุงูุฒุงุด ุฏูุฏ
   - ุณุฑุนุช ุงูุชุฑูุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ

3. **ุฎุทุง element not found:**
   - ุณุงุฎุชุงุฑ ุตูุญู ุฏูุงุฑ ุชุบุฑ ฺฉุฑุฏู
   - selector ูุง ุฑุง ุจุฑุฑุณ ฺฉูุฏ

### ูุงฺฏโูุง:
ฺฉุฑุงููุฑ ูุงฺฏโูุง ฺฉุงูู ุชููุฏ ูโฺฉูุฏ:
- โ ููููุชโูุง
- โ๏ธ ูุดุฏุงุฑูุง
- โ ุฎุทุงูุง

## ๐ ุขูุงุฑ ู ฺฏุฒุงุฑุด

### ุฎูุงุตู ุขูุงุฑ:
```json
{
    "timestamp": "2024-01-01T12:00:00.000Z",
    "totalAds": {
        "sale": {
            "tehran": 45,
            "karaj": 38
        },
        "rent": {
            "tehran": 42,
            "karaj": 35
        }
    },
    "config": {...}
}
```

## ๐ค ูุดุงุฑฺฉุช

ุจุฑุง ูุดุงุฑฺฉุช ุฏุฑ ุชูุณุนู:
1. Fork ฺฉูุฏ
2. Branch ุฌุฏุฏ ุงุฌุงุฏ ฺฉูุฏ
3. ุชุบุฑุงุช ุฑุง commit ฺฉูุฏ
4. Pull request ุงุฑุณุงู ฺฉูุฏ

## ๐ ูุงุณูุณ

ุงู ูพุฑูฺู ุชุญุช ูุงุณูุณ MIT ููุชุดุฑ ุดุฏู ุงุณุช.

## โ๏ธ ูฺฉุงุช ููู

- ุงุฒ ฺฉุฑุงููุฑ ุจู ุตูุฑุช ูุณุฆููุงูู ุงุณุชูุงุฏู ฺฉูุฏ
- ุจู robots.txt ุณุงุช ุงุญุชุฑุงู ุจฺฏุฐุงุฑุฏ
- ุชุงุฎุฑูุง ููุงุณุจ ุจู ุฏุฑุฎูุงุณุชโูุง ุฑุนุงุช ฺฉูุฏ
- ุงุฒ ุฏุงุฏูโูุง ุงุณุชุฎุฑุงุฌ ุดุฏู ููุท ุจุฑุง ุงูุฏุงู ูุงููู ุงุณุชูุงุฏู ฺฉูุฏ

## ๐ ูพุดุชุจุงู

ุจุฑุง ฺฏุฒุงุฑุด ูุดฺฉูุงุช ุง ูพุดููุงุฏุงุช:
- Issue ุฏุฑ GitHub ุงุฌุงุฏ ฺฉูุฏ
- ูุณุชูุฏุงุช ุฑุง ุจุฑุฑุณ ฺฉูุฏ
- ฺฉุฏ ุฑุง debug ฺฉูุฏ 